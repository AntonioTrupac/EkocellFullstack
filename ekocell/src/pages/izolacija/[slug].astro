---
import RichText from "@components/RichText.astro";
import { getCategories } from "src/api/getCategories";
import Layout from "src/layouts/Layout.astro";

type SpecifikacijeIPredonsti = {
  specifikacija?:
    | {
        [k: string]: unknown;
      }[]
    | undefined;
  prednosti?:
    | {
        [k: string]: unknown;
      }[]
    | undefined;
  id?: string | undefined;
};

export async function getStaticPaths() {
  const data = await getCategories();

  return data.category.map((c) => {
    return {
      params: { slug: c.slug },
      props: {
        opis: c.opis,
        ime: c.ime,
        specifikacijePrednost: c.specifikacijeiprednost,
      },
    };
  });
}

const { slug } = Astro.params;
const { opis, ime, specifikacijePrednost } = Astro.props;

console.log(specifikacijePrednost);
---

<Layout title="Ekocell | Egger Izolacija"
  >{slug} : {ime}

  {opis}

  {
    specifikacijePrednost.map((s: any) => {
      return <RichText richText={s.specifikacija} />;
    })
  }
</Layout>
